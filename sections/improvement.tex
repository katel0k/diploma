В рамках дипломной работы также был обнаружен способ улучшить этот фреймворк.

Одна из упомянутых выше проблем - плохое покрытие тестами.
В частности, результат получается нечитабельным, поскольку появляется внутреннее представление фреймворка, которое не является частью исходного кода.

% // TODO: привести пример

Этот недостаток можно устранить, если сжать генерируемые строки кода. 

Еще одна вещь которую можно сделать - использовать вместо однострочных выражений с экранированием символов - многострочные. Результат, пускай и все еще тяжело воспринимается, значительно более читабелен чем ранее

% // TODO: привести пример

Уточнение про реализацию:
более простым, а также более оптимальным решением было сделать сложный тег для открывающей и закрывающей скобки вместо того чтобы анализировать строки на наличие символов закрывающей кавычки и экранировать их.

Еще одно улучшение было - добавить больше информации про локации оригинального кода для LSP.

Рассматривался также вариант добавления каких-то указателей для bisect\_ppx, которые экранировали бы сгенерированный EML код.
Однако, этот подход был исключен из рассмотрения по следующим причинам:
\begin{itemize}
    \item bisect\_ppx не имеет такой опции в принципе
    \item результирующий код все еще должен быть компилируемым OCaml
    \item метки также должны быть поддержаны LSP
\end{itemize}

Ни одно из этих ограничений не представляется возможным преодолеть, тем более все их вместе.
